# Chapter 06 실습으로 복습하는 네트워크

## 06-1 와이어샤크 설치 및 사용법

### 개요
이 섹션에서는 네트워크 패킷 분석 도구인 와이어샤크(Wireshark)의 설치 방법과 기본적인 사용법에 대해 알아봅니다. 와이어샤크는 네트워크 트래픽을 캡처하고 분석할 수 있는 강력한 오픈 소스 도구로, 네트워크 문제 해결과 프로토콜 학습에 매우 유용합니다.

### 와이어샤크 설치

와이어샤크는 다양한 운영체제에서 사용할 수 있는 무료 오픈 소스 소프트웨어입니다. 주요 운영체제별 설치 방법은 다음과 같습니다.

#### 윈도우

1. **공식 웹사이트 방문**: [Wireshark 다운로드 페이지](https://www.wireshark.org/download.html)에 접속합니다.
2. **설치 파일 다운로드**: Windows Installer(64-bit) 또는 Windows Installer(32-bit)를 선택하여 다운로드합니다.
3. **설치 프로그램 실행**: 다운로드한 설치 파일(.exe)을 실행합니다.
4. **설치 옵션 선택**:
   - 모든 사용자를 위해 설치할지, 현재 사용자만을 위해 설치할지 선택합니다.
   - 설치할 구성 요소를 선택합니다(기본 설정 권장).
   - WinPcap/Npcap 설치 옵션을 선택합니다(패킷 캡처를 위해 필요).
5. **설치 완료**: 설치가 완료되면 '마침'을 클릭합니다.

#### 맥OS

1. **Homebrew를 통한 설치** (권장):
   ```bash
   brew install --cask wireshark
   ```

2. **공식 웹사이트를 통한 설치**:
   - [Wireshark 다운로드 페이지](https://www.wireshark.org/download.html)에서 macOS용 인스톨러(.dmg)를 다운로드합니다.
   - 다운로드한 .dmg 파일을 실행합니다.
   - Wireshark 아이콘을 Applications 폴더로 드래그합니다.

3. **권한 설정**:
   - 맥OS에서는 패킷 캡처를 위해 추가 권한이 필요할 수 있습니다.
   - 첫 실행 시 관리자 권한을 요청하는 메시지가 표시될 수 있습니다.

### 와이어샤크 사용법

와이어샤크의 기본적인 사용법을 알아보겠습니다.

#### 패킷 캡처

1. **와이어샤크 실행**: 설치된 와이어샤크 프로그램을 실행합니다.

2. **캡처 인터페이스 선택**:
   - 와이어샤크 메인 화면에서 사용 가능한 네트워크 인터페이스 목록이 표시됩니다.
   - 캡처하려는 네트워크 트래픽이 흐르는 인터페이스를 선택합니다.
   - 일반적으로 Wi-Fi 연결은 "Wi-Fi" 또는 "wlan0", 유선 연결은 "이더넷" 또는 "eth0"으로 표시됩니다.

3. **캡처 시작**:
   - 선택한 인터페이스를 더블 클릭하거나, 인터페이스를 선택한 후 상단 툴바의 '시작' 버튼을 클릭합니다.
   - 캡처가 시작되면 실시간으로 패킷이 표시됩니다.

4. **캡처 중지**:
   - 상단 툴바의 '중지' 버튼을 클릭하여 패킷 캡처를 중지할 수 있습니다.

#### 와이어샤크 화면 구성

와이어샤크의 주요 화면 구성은 다음과 같습니다:

1. **패킷 목록 창(상단)**:
   - 캡처된 모든 패킷이 시간순으로 나열됩니다.
   - 각 행은 하나의 패킷을 나타내며, 패킷 번호, 시간, 출발지 주소, 목적지 주소, 프로토콜, 길이, 정보 등이 표시됩니다.

2. **패킷 상세 창(중간)**:
   - 패킷 목록에서 선택한 패킷의 상세 정보가 계층적으로 표시됩니다.
   - 프레임, 이더넷, IP, TCP/UDP, 응용 계층 프로토콜 등의 정보를 확인할 수 있습니다.
   - 각 계층을 확장하여 더 자세한 정보를 볼 수 있습니다.

3. **패킷 바이트 창(하단)**:
   - 선택한 패킷의 원시 데이터가 16진수와 ASCII 형식으로 표시됩니다.
   - 패킷 상세 창에서 특정 필드를 선택하면, 해당 필드에 해당하는 바이트가 강조 표시됩니다.

#### 패킷 필터링

와이어샤크는 강력한 필터링 기능을 제공하여 특정 패킷만 표시할 수 있습니다.

1. **디스플레이 필터**:
   - 상단의 "필터" 입력란에 필터 표현식을 입력합니다.
   - 예시:
     - `ip.addr == 192.168.1.1`: 특정 IP 주소와 관련된 패킷만 표시
     - `tcp.port == 80`: HTTP 트래픽(포트 80)만 표시
     - `http`: HTTP 프로토콜 패킷만 표시
     - `tcp.flags.syn == 1`: SYN 플래그가 설정된 TCP 패킷만 표시

2. **캡처 필터**:
   - 캡처 시작 전에 설정하여 특정 패킷만 캡처할 수 있습니다.
   - 캡처 옵션 대화 상자에서 설정하거나, 캡처 인터페이스 목록 화면에서 설정할 수 있습니다.
   - BPF(Berkeley Packet Filter) 문법을 사용합니다.
   - 예시:
     - `host 192.168.1.1`: 특정 호스트와 관련된 패킷만 캡처
     - `port 80`: 포트 80을 사용하는 패킷만 캡처
     - `tcp`: TCP 패킷만 캡처

#### 캡처 파일 저장과 열기

1. **캡처 파일 저장**:
   - 메뉴에서 `파일 > 저장` 또는 `파일 > 다른 이름으로 저장`을 선택합니다.
   - 기본 파일 형식은 .pcapng입니다.
   - 필요에 따라 저장 옵션(압축, 패킷 범위 등)을 설정할 수 있습니다.

2. **캡처 파일 열기**:
   - 메뉴에서 `파일 > 열기`를 선택합니다.
   - .pcap, .pcapng 등 다양한 형식의 캡처 파일을 열 수 있습니다.
   - 최근 파일은 `파일 > 최근 파일`에서 빠르게 접근할 수 있습니다.

### 2가지 키워드로 정리하는 핵심 포인트
1. **패킷 캡처**: 와이어샤크는 네트워크 인터페이스를 통해 흐르는 모든 패킷을 캡처하여 분석할 수 있게 해주는 도구입니다. 이를 통해 네트워크 트래픽을 실시간으로 모니터링하고 문제를 진단할 수 있습니다.
2. **패킷 분석**: 와이어샤크는 캡처된 패킷의 내용을 프로토콜 계층별로 상세하게 분석하여 보여주며, 강력한 필터링 기능을 통해 특정 패킷만 선별적으로 볼 수 있어 효율적인 네트워크 분석이 가능합니다.

### 확인 문제
1. 와이어샤크에서 HTTP 트래픽만 필터링하기 위한 올바른 디스플레이 필터는 무엇인가요?
   - [ ] http.traffic
   - [ ] http
   - [ ] port 80
   - [ ] protocol http

2. 와이어샤크 화면의 세 가지 주요 창에 대한 설명으로 올바르지 않은 것은?
   - [ ] 패킷 목록 창은 캡처된 모든 패킷을 시간순으로 나열합니다.
   - [ ] 패킷 상세 창은 선택한 패킷의 프로토콜 계층별 정보를 보여줍니다.
   - [ ] 패킷 바이트 창은 선택한 패킷의 원시 데이터를 16진수와 ASCII 형식으로 표시합니다.
   - [ ] 패킷 분석 창은 선택한 패킷의 보안 취약점을 자동으로 분석합니다.

3. 맥OS에서 와이어샤크를 설치하는 방법 중 Homebrew를 사용한 명령어는 무엇인가요?
   - [ ] brew install --cask wireshark
   - [ ] apt-get install wireshark
   - [ ] sudo install wireshark
   - [ ] brew cask install wireshark

> [정답 및 해설 보기](../answers_and_explanations.md#06-1-와이어샤크-설치-및-사용법)