# Chapter 01 컴퓨터 네트워크 시작하기

## 01-3 네트워크 미시적으로 살펴보기

### 개요
이 섹션에서는 네트워크를 미시적 관점에서 살펴봅니다. 네트워크 통신의 기본 단위인 프로토콜부터 시작하여 네트워크 참조 모델, 데이터 캡슐화와 역캡슐화, 그리고 PDU(Protocol Data Unit)에 대해 학습합니다. 또한 네트워크 성능을 측정하는 다양한 지표에 대해서도 알아봅니다.

### 프로토콜
프로토콜(Protocol)은 네트워크에서 데이터를 교환하기 위한 규칙이나 표준의 집합입니다. 컴퓨터나 네트워크 장비가 서로 통신하기 위해서는 동일한 프로토콜을 사용해야 합니다.

프로토콜은 다음과 같은 요소를 정의합니다:
- **구문(Syntax)**: 데이터 형식, 부호화, 신호 레벨 등
- **의미(Semantics)**: 오류 제어와 흐름 제어를 위한 제어 정보
- **타이밍(Timing)**: 속도 조절과 순서 조절 등

예를 들어, HTTP는 웹 브라우저와 웹 서버 간의 통신을 위한 프로토콜이며, TCP는 신뢰성 있는 데이터 전송을 위한 프로토콜입니다.

### 네트워크 참조 모델
네트워크 참조 모델은 네트워크 통신을 여러 계층으로 나누어 각 계층이 특정 기능을 담당하도록 하는 개념적 프레임워크입니다. 가장 널리 알려진 두 가지 모델은 OSI 모델과 TCP/IP 모델입니다.

#### OSI 모델
OSI(Open Systems Interconnection) 모델은 국제표준화기구(ISO)에서 개발한 7계층 모델입니다.

1. **물리 계층(Physical Layer)**: 비트 단위의 데이터를 전기 신호로 변환하여 전송 매체를 통해 전달합니다.
2. **데이터 링크 계층(Data Link Layer)**: 물리적 연결을 통한 신뢰성 있는 데이터 전송을 담당합니다. MAC 주소를 사용하여 통신합니다.
3. **네트워크 계층(Network Layer)**: 서로 다른 네트워크 간의 통신을 가능하게 합니다. IP 주소를 사용하여 라우팅을 수행합니다.
4. **전송 계층(Transport Layer)**: 종단 간 통신을 제공하며, 데이터의 신뢰성과 흐름 제어를 담당합니다. TCP, UDP 등의 프로토콜이 이 계층에 속합니다.
5. **세션 계층(Session Layer)**: 통신 세션을 설정, 유지, 종료하는 기능을 담당합니다.
6. **표현 계층(Presentation Layer)**: 데이터 형식 변환, 암호화, 압축 등을 담당합니다.
7. **응용 계층(Application Layer)**: 사용자와 직접 상호작용하는 애플리케이션에 네트워크 서비스를 제공합니다. HTTP, FTP, SMTP 등의 프로토콜이 이 계층에 속합니다.

#### TCP/IP 모델
TCP/IP 모델은 인터넷에서 실제로 사용되는 4계층 모델입니다.

1. **네트워크 인터페이스 계층(Network Interface Layer)**: OSI 모델의 물리 계층과 데이터 링크 계층에 해당합니다.
2. **인터넷 계층(Internet Layer)**: OSI 모델의 네트워크 계층에 해당하며, IP 프로토콜이 이 계층에 속합니다.
3. **전송 계층(Transport Layer)**: OSI 모델의 전송 계층과 동일하며, TCP와 UDP 프로토콜이 이 계층에 속합니다.
4. **응용 계층(Application Layer)**: OSI 모델의 세션 계층, 표현 계층, 응용 계층을 포함합니다.

### 캡슐화와 역캡슐화
데이터가 네트워크를 통해 전송될 때, 각 계층을 거치면서 헤더(때로는 트레일러)가 추가되거나 제거되는 과정이 있습니다.

#### 캡슐화
캡슐화(Encapsulation)는 상위 계층에서 하위 계층으로 데이터가 전달될 때, 각 계층에서 해당 계층의 헤더를 데이터에 추가하는 과정입니다.

예를 들어, 응용 계층에서 생성된 데이터는 전송 계층에서 TCP 또는 UDP 헤더가 추가되고, 인터넷 계층에서 IP 헤더가 추가되며, 네트워크 인터페이스 계층에서 이더넷 헤더와 트레일러가 추가됩니다.

#### 역캡슐화
역캡슐화(Decapsulation)는 하위 계층에서 상위 계층으로 데이터가 전달될 때, 각 계층에서 해당 계층의 헤더를 제거하는 과정입니다.

수신 측에서는 네트워크 인터페이스 계층에서 이더넷 헤더와 트레일러를 제거하고, 인터넷 계층에서 IP 헤더를 제거하며, 전송 계층에서 TCP 또는 UDP 헤더를 제거하여 최종적으로 응용 계층에 원본 데이터를 전달합니다.

### PDU
PDU(Protocol Data Unit)는 각 계층에서 데이터 단위를 지칭하는 용어입니다. 각 계층마다 PDU의 이름이 다릅니다:

- **응용 계층**: 데이터(Data) 또는 메시지(Message)
- **전송 계층**: 세그먼트(Segment, TCP의 경우) 또는 데이터그램(Datagram, UDP의 경우)
- **인터넷 계층**: 패킷(Packet)
- **네트워크 인터페이스 계층**: 프레임(Frame)

PDU는 헤더, 데이터, 그리고 때로는 트레일러로 구성됩니다. 헤더에는 출발지 주소, 목적지 주소, 오류 검출 코드 등의 제어 정보가 포함됩니다.

### [좀 더 알아보기] OSI 7계층, TCP/IP 4계층은 사실 아무것도 해 주지 않는다
OSI 모델과 TCP/IP 모델은 실제로 네트워크 통신을 수행하는 것이 아니라, 네트워크 통신을 이해하고 설계하기 위한 개념적 프레임워크입니다. 실제 통신은 각 계층에 해당하는 프로토콜들이 수행합니다.

예를 들어, OSI 모델의 전송 계층은 그 자체로 데이터를 전송하지 않습니다. 대신 TCP나 UDP와 같은 프로토콜이 전송 계층의 기능을 구현하여 실제 데이터 전송을 담당합니다.

따라서 이러한 모델들은 네트워크 통신의 복잡성을 관리하기 위한 도구로 이해하는 것이 중요합니다. 각 계층은 특정 기능을 담당하며, 이를 통해 네트워크 문제를 진단하고 해결하는 데 도움이 됩니다.

### [좀 더 알아보기] 트래픽과 네트워크 성능 지표
네트워크 성능을 측정하는 데 사용되는 여러 지표들이 있습니다.

#### 처리율
처리율(Throughput)은 단위 시간당 전송되는 데이터의 양을 의미합니다. 일반적으로 비트 단위로 측정되며, bps(bits per second)로 표현됩니다. 처리율은 실제로 네트워크를 통해 전송되는 데이터의 양을 나타내므로, 네트워크의 실질적인 성능을 평가하는 데 중요한 지표입니다.

#### 대역폭
대역폭(Bandwidth)은 네트워크가 처리할 수 있는 최대 데이터 전송 속도를 의미합니다. 대역폭도 bps로 표현되지만, 이는 이론적인 최대값이며 실제 처리율은 다양한 요인에 의해 이보다 낮을 수 있습니다.

#### 패킷 손실
패킷 손실(Packet Loss)은 네트워크를 통해 전송되는 동안 손실되는 패킷의 비율을 의미합니다. 패킷 손실은 네트워크 혼잡, 하드웨어 오류, 신호 감쇠 등 다양한 원인으로 발생할 수 있으며, 높은 패킷 손실률은 네트워크 성능 저하의 주요 원인이 됩니다.

그 외에도 지연 시간(Latency), 지터(Jitter), 오류율(Error Rate) 등 다양한 성능 지표가 있으며, 이러한 지표들을 종합적으로 고려하여 네트워크의 성능을 평가합니다.

### 7가지 키워드로 정리하는 핵심 포인트
1. **프로토콜**: 네트워크에서 데이터를 교환하기 위한 규칙이나 표준의 집합
2. **OSI 모델**: 네트워크 통신을 7개 계층으로 나눈 개념적 프레임워크
3. **TCP/IP 모델**: 인터넷에서 실제로 사용되는 4계층 모델
4. **캡슐화**: 상위 계층에서 하위 계층으로 데이터가 전달될 때 헤더를 추가하는 과정
5. **역캡슐화**: 하위 계층에서 상위 계층으로 데이터가 전달될 때 헤더를 제거하는 과정
6. **PDU**: 각 계층에서의 데이터 단위(데이터/메시지, 세그먼트/데이터그램, 패킷, 프레임)
7. **네트워크 성능 지표**: 처리율, 대역폭, 패킷 손실 등 네트워크 성능을 측정하는 다양한 지표

### 확인 문제
1. 다음 중 OSI 모델의 7계층을 올바르게 나열한 것은?
   - [ ] 물리, 데이터 링크, 네트워크, 전송, 세션, 표현, 인터넷
   - [ ] 물리, 데이터 링크, 네트워크, 전송, 세션, 표현, 응용
   - [ ] 네트워크 인터페이스, 인터넷, 전송, 응용
   - [ ] 물리, 데이터 링크, 인터넷, 전송, 세션, 표현, 응용

2. 캡슐화 과정에서 데이터에 추가되는 것은?
   - [ ] 데이터만 추가된다
   - [ ] 트레일러만 추가된다
   - [ ] 헤더와 때로는 트레일러가 추가된다
   - [ ] 아무것도 추가되지 않는다

3. TCP/IP 모델의 전송 계층에서 사용되는 PDU의 이름은?
   - [ ] 프레임
   - [ ] 패킷
   - [ ] 세그먼트(TCP) 또는 데이터그램(UDP)
   - [ ] 메시지

4. 네트워크 성능을 측정하는 지표 중, 단위 시간당 실제로 전송되는 데이터의 양을 나타내는 것은?
   - [ ] 대역폭
   - [ ] 처리율
   - [ ] 지연 시간
   - [ ] 패킷 손실

5. OSI 모델과 TCP/IP 모델의 가장 큰 차이점은?
   - [ ] OSI 모델은 실제로 사용되지 않는다
   - [ ] OSI 모델은 7계층, TCP/IP 모델은 4계층으로 구성된다
   - [ ] TCP/IP 모델에는 물리 계층이 없다
   - [ ] OSI 모델에는 응용 계층이 없다

> [정답 및 해설 보기](../answers_and_explanations.md#01-3-네트워크-미시적으로-살펴보기)