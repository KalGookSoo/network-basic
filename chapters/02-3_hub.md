# Chapter 02 물리 계층과 데이터 링크 계층

## 02-3 허브

### 개요
이 섹션에서는 네트워크의 기본 연결 장치인 허브(Hub)에 대해 살펴봅니다. 물리 계층에서 주소 개념이 없는 이유와 허브의 특징, 콜리전 도메인의 개념, 그리고 이더넷에서 사용되는 CSMA/CD 방식에 대해 학습합니다. 이를 통해 초기 이더넷 네트워크의 작동 원리와 한계점을 이해하고, 현대 네트워크로 발전하게 된 배경 지식을 습득합니다.

### 주소 개념이 없는 물리 계층
OSI 모델의 물리 계층(Physical Layer)은 네트워크 통신의 가장 기본적인 계층으로, 비트(bit) 단위의 데이터를 전기 신호, 광 신호, 또는 전파로 변환하여 전송하는 역할을 담당합니다.

물리 계층의 주요 특징은 다음과 같습니다:

- **비트 전송에 집중**: 물리 계층은 단순히 비트 스트림을 전송 매체를 통해 전달하는 데 집중합니다.
- **주소 개념 없음**: 물리 계층에서는 데이터의 출발지나 목적지를 식별하는 주소 개념이 없습니다.
- **신호 변환**: 디지털 데이터를 전송 매체에 적합한 신호로 변환하고, 수신된 신호를 다시 디지털 데이터로 변환합니다.
- **물리적 연결 관리**: 케이블, 커넥터, 핀 배열 등 물리적 연결에 관한 사항을 정의합니다.

물리 계층에서 주소 개념이 없는 이유는 이 계층의 주요 목적이 단순히 비트를 한 장치에서 다른 장치로 전송하는 것이기 때문입니다. 데이터의 주소 지정과 경로 설정은 상위 계층(데이터 링크 계층, 네트워크 계층)의 역할입니다.

물리 계층 장비인 허브는 이러한 특성을 반영하여, 수신된 신호를 단순히 모든 포트로 재전송하는 방식으로 작동합니다.

### 허브

#### 허브의 특징
허브(Hub)는 여러 장치를 연결하여 네트워크를 구성하는 가장 기본적인 네트워크 장비입니다. 물리 계층에서 동작하며, 다음과 같은 특징을 가집니다:

1. **리피터 기능**: 허브는 기본적으로 멀티포트 리피터(Multi-port Repeater)입니다. 한 포트로 들어온 신호를 증폭하여 다른 모든 포트로 재전송합니다.

2. **브로드캐스트 방식**: 허브는 한 포트에서 수신한 데이터를 연결된 모든 포트(수신 포트 제외)로 전송합니다. 이는 주소 개념이 없는 물리 계층의 특성을 반영한 것입니다.

3. **비지능적 장치**: 허브는 수신된 데이터의 목적지를 식별하거나 필터링하는 기능이 없습니다. 모든 데이터를 모든 포트로 전송하기 때문에 네트워크 효율성이 낮습니다.

4. **반이중 통신(Half-duplex)**: 허브 기반 네트워크에서는 한 번에 한 장치만 데이터를 전송할 수 있습니다. 여러 장치가 동시에 데이터를 전송하면 충돌(collision)이 발생합니다.

5. **대역폭 공유**: 허브에 연결된 모든 장치는 네트워크 대역폭을 공유합니다. 따라서 연결된 장치 수가 증가할수록 각 장치가 사용할 수 있는 대역폭은 감소합니다.

허브는 구조가 단순하고 비용이 저렴하다는 장점이 있지만, 네트워크 효율성과 보안 측면에서 많은 단점을 가지고 있어 현대 네트워크에서는 거의 사용되지 않고 스위치로 대체되었습니다.

#### 콜리전 도메인
콜리전 도메인(Collision Domain)은 네트워크에서 충돌이 발생할 수 있는 영역을 의미합니다. 이더넷 환경에서 두 장치가 동시에 데이터를 전송하면 신호가 충돌하여 데이터가 손상될 수 있습니다.

허브와 콜리전 도메인의 관계는 다음과 같습니다:

- **하나의 허브 = 하나의 콜리전 도메인**: 허브에 연결된 모든 장치는 동일한 콜리전 도메인에 속합니다.
- **충돌 영향**: 한 콜리전 도메인 내에서 충돌이 발생하면, 해당 도메인 내의 모든 장치가 영향을 받습니다.
- **대역폭 제한**: 콜리전 도메인이 클수록(연결된 장치가 많을수록) 충돌 가능성이 높아지고 네트워크 성능이 저하됩니다.

콜리전 도메인의 크기를 줄이는 것은 네트워크 성능 향상에 중요합니다. 이를 위해 허브 대신 스위치를 사용하거나, 네트워크를 여러 세그먼트로 분할하는 방법이 있습니다.

### CSMA/CD
CSMA/CD(Carrier Sense Multiple Access with Collision Detection)는 이더넷에서 사용되는 매체 접근 제어(MAC) 방식으로, 여러 장치가 동일한 전송 매체를 공유할 때 충돌을 관리하는 프로토콜입니다.

CSMA/CD의 작동 원리는 다음과 같습니다:

1. **Carrier Sense(캐리어 감지)**: 장치가 데이터를 전송하기 전에 먼저 네트워크 매체가 사용 중인지 확인합니다. 다른 장치가 이미 데이터를 전송 중이면 대기합니다.

2. **Multiple Access(다중 접근)**: 여러 장치가 동일한 네트워크 매체에 접근할 수 있습니다. 매체가 사용 중이지 않으면 어떤 장치든 데이터를 전송할 수 있습니다.

3. **Collision Detection(충돌 감지)**: 두 장치가 거의 동시에 데이터 전송을 시작하면 충돌이 발생합니다. 장치들은 이러한 충돌을 감지하고 즉시 전송을 중단합니다.

4. **백오프 알고리즘(Backoff Algorithm)**: 충돌이 감지되면, 각 장치는 무작위 시간 동안 대기한 후 재전송을 시도합니다. 이를 이진 지수 백오프(Binary Exponential Backoff)라고 하며, 연속적인 충돌이 발생할 경우 대기 시간이 점점 길어집니다.

CSMA/CD는 허브 기반 네트워크에서 필수적인 프로토콜이지만, 다음과 같은 한계가 있습니다:

- **네트워크 사용률 제한**: 충돌이 자주 발생하면 네트워크 사용률(utilization)이 크게 감소합니다.
- **확장성 문제**: 연결된 장치 수가 증가할수록 충돌 가능성이 높아져 성능이 저하됩니다.
- **전이중 통신 불가**: CSMA/CD는 반이중 통신 환경에서만 작동하므로, 전이중(Full-duplex) 통신의 이점을 활용할 수 없습니다.

현대 네트워크에서는 스위치의 도입과 전이중 통신의 보편화로 CSMA/CD의 필요성이 크게 감소했습니다. 스위치는 각 포트가 별도의 콜리전 도메인을 형성하므로 충돌이 발생하지 않습니다.

### 5가지 키워드로 정리하는 핵심 포인트
1. **물리 계층**: 주소 개념 없이 비트 단위의 데이터를 전기 신호로 변환하여 전송하는 OSI 모델의 최하위 계층
2. **허브**: 수신된 신호를 모든 포트로 재전송하는 물리 계층 장비로, 단순하지만 네트워크 효율성이 낮음
3. **콜리전 도메인**: 네트워크에서 충돌이 발생할 수 있는 영역으로, 허브에 연결된 모든 장치는 동일한 콜리전 도메인에 속함
4. **CSMA/CD**: 이더넷에서 사용되는 매체 접근 제어 방식으로, 충돌을 감지하고 관리하는 프로토콜
5. **브로드캐스트 방식**: 허브가 한 포트에서 수신한 데이터를 모든 포트로 전송하는 방식으로, 대역폭 낭비와 보안 문제를 야기함

### 확인 문제
1. 다음 중 허브의 특징으로 옳지 않은 것은?
   - [ ] 수신된 신호를 모든 포트로 재전송한다
   - [ ] 물리 계층에서 동작한다
   - [ ] 하나의 콜리전 도메인을 형성한다
   - [x] 목적지 MAC 주소를 기반으로 트래픽을 필터링한다

2. 콜리전 도메인에 대한 설명으로 옳은 것은?
   - [ ] 브로드캐스트 트래픽이 전파되는 영역이다
   - [x] 충돌이 발생할 수 있는 네트워크 영역이다
   - [ ] IP 주소가 동일한 장치들의 집합이다
   - [ ] 라우터로 분리되는 네트워크 세그먼트이다

3. CSMA/CD 프로토콜에서 충돌이 감지된 후 장치들이 취하는 행동은?
   - [ ] 즉시 데이터 전송을 재개한다
   - [ ] 네트워크 관리자에게 알림을 보낸다
   - [x] 무작위 시간 동안 대기한 후 재전송을 시도한다
   - [ ] 다른 전송 매체로 전환한다

4. 허브 기반 네트워크의 단점이 아닌 것은?
   - [ ] 네트워크 대역폭이 모든 장치에 의해 공유된다
   - [ ] 한 장치의 과도한 트래픽이 전체 네트워크 성능에 영향을 미친다
   - [ ] 모든 트래픽이 모든 장치에 전송되어 보안 위험이 있다
   - [x] 설정이 복잡하고 관리가 어렵다

5. 물리 계층에서 주소 개념이 없는 이유로 가장 적절한 것은?
   - [ ] 주소 지정이 너무 복잡하기 때문에
   - [x] 물리 계층은 단순히 비트 전송에만 집중하기 때문에
   - [ ] 물리 계층 장비의 처리 능력이 제한적이기 때문에
   - [ ] 주소 지정이 불필요하게 대역폭을 소모하기 때문에

> [정답 및 해설 보기](../answers_and_explanations.md#02-3-허브)